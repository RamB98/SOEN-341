{% extends "base.html" %}

{% block head %} {{ super() }}<title>{% block title %}Account{% endblock %}</title>{% endblock %}

{% block content %}
<body>
    {% block navbar %} {{ super() }} {% endblock %}

    
    <main role="main">
	<br>
	<h1 class="centerstuff"> My Account</h1><br>

    <div class="row">
        <!-- first column of html page -->
        <div class="column1">

            <h2>My Profile Information</h2>

            <div>
                <img src="/static/images/profilePics/{{ img }}" class="profile-pic">
                {% if user == current_user %}
                    <form  enctype="multipart/form-data" action="/upload" method="POST">
                        <input type="file" name="pic" style="margin-bottom: 12px;"><br>
                        <input type="submit" value="Upload file">
                    </form>
                    <br>
                {% endif %}
                <h6>Username: {{ current_user.username }}</h6>
                <h6>Email: {{ current_user.email }}</h6>
                <br>

                <div class="container">

                    <form method="POST" class="form-modifyinfo">

                        {{ form.hidden_tag() }}

                        {{ form.newUsername.label() }}
                        {{ form.newUsername(class="form-control", placeholder="User Name") }}
                        <br>
                        {{ form.newEmail.label() }}
                        {{ form.newEmail(class="form-control", placeholder="Email Address") }}

                        {{ form.submit(class="btn btn-lg btn-block btn-primary") }}
                    </form>
                </div>


                <br>

            
                <h6>Profile Statistics:</h6>
            
                <h6>Total amount of question upvotes: {{ upVQC }}</h6>
                <h6>Total amount of question downvotes: {{ downVQC }}</h6>
            
                <h6>Total amount of answer upvotes: {{ upVAC }}</h6>
                <h6>Total amount of answer downvotes: {{ downVAC }}</h6>
        
            </div>

        </div>
        
        <!-- second column of html page -->
        <div class="column2">

            <h2> My Questions: </h2>
        
            <div>
                {% for q in questions %}
                <h4>
                    <a class="hide-overflow" style="margin-left: 5%" href="{{ url_for('viewquestion_page') }}?question={{ q.title }}">{{ q.title }}</a>
                </h4>
                <h6>
                <p class="text ignore-css" style="margin-left: 10%">Asked on {{ q.questionaskdate}}</p>
                </h6>
                <br>
                {% endfor %}
        
                <h2> My Answers: </h2>
                {%for a in answers %}
                    <h4>
                        <p class="hide-overflow" style="margin-left: 5%">{{ a.answer}}</p>
                    </h4>
                    <h6>
                        <p class="ignore-css text" style="margin-left: 10%">Answer given on {{ a.answerdate}} and replying to the question: </p>
                    </h6>
            
                    {%for q in allquestions %}
                        {% if q.id == a.question_id %}
                            <h6>
                                <a class="text" style="margin-left: 15%" href="{{ url_for('viewquestion_page') }}?question={{ q.title }}">{{ q.title }}</a>
                            </h6>
                        {% endif %}
                    {% endfor %}
                {% endfor %}
            </div>

        </div>

        <!-- third column of html page -->
        <div class="column3">
            <h2> My Bookmarks: </h2>
            {% for b in bookmarks %}
            <h4>
                <a class="hide-overflow" style="margin-left: 5%" href="{{ url_for('viewquestion_page') }}?question={{ b.title }}">{{ b.title }}</a>
            </h4>
            <br>
            {% endfor %}
        </div>
    </div>

    <br>

    <style>
        .column1 {
        margin-left: 20px;
        float: left;
        width: 30%;
        }

        .column2 {
            direction: ltr;
            float: left;
            width: 32.5%;
        }

        .column3 {
            float: left;
            width: 32.5%;
        }

        .row:after {
        content: "";
        display: table;
        clear: both;
        }

        .centerstuff{
			text-align: center;
		}

        .hide-overflow{
            text-overflow: ellipsis;
        }

        p{
            overflow: hidden;
            white-space: nowrap;
        }

        a{
            overflow: hidden;
            white-space: nowrap;
        }

        .ignore-css{
            all: unset;
        }
	</style>
	
	<br>
{% endblock %}
</body>
